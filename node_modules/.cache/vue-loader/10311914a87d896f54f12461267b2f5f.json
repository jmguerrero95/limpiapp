{"remainingRequest":"/home/ubuntu/limpiapp/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ubuntu/limpiapp/src/components/managementuser/CompUserRegister.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ubuntu/limpiapp/src/components/managementuser/CompUserRegister.vue","mtime":1583096937000},{"path":"/home/ubuntu/limpiapp/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/home/ubuntu/limpiapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ubuntu/limpiapp/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { mapState,mapMutations } from \"vuex\";\r\nimport overlayalert from '@/components/popups/CompPopsAlert.vue'\r\nimport axios from 'axios'\r\nexport default {\r\n   components: {\r\n    overlayalert,\r\n  },\r\n  data() {\r\n    return {\r\n      valid: false,\r\n      rules: {\r\n           ///(?=.*[AZfont>)/.test(v)\r\n           texto: v => /^[A-Z ]+$/i.test(v) || 'Use solo letras',\r\n           required: value => !!value || \"Requerido\",\r\n           min: v => v.length >= 6 || \"Min 6 caractéres\",\r\n           emailMatch: () => \"The email and password you entered don't match\",\r\n           numeros: v => /^\\d+$/.test(v) || 'Use solo numeros',\r\n         },\r\n      if1:true,\r\n      if2:false,\r\n      if3:true,\r\n      guardar: \"guardar1()\",\r\n      listNumber: 1,\r\n      boton:false,\r\n      id: null,\r\n      menu: false,\r\n      modal: false,\r\n      menu2: false,\r\n      locale: \"es\",\r\n      birthDay:\"\",\r\n      popout: false,\r\n      inset: false,\r\n      multiple: false,\r\n      disabled: false,\r\n      readonly: false,\r\n      focusable: false,\r\n      persistentHint: true,\r\n      userInternalSkills: [],\r\n      modCheckService:[],\r\n      form1:{\r\n        firs_name:\"\",\r\n        last_name:\"\",\r\n        user_email:\"\",\r\n        tipo:\"\",\r\n        tipo2:\"\",\r\n        image: null,\r\n        ident:\"\",\r\n        userPhone:\"\",\r\n        birthDay:\"\",\r\n        user_Address:\"\",\r\n        id:0,\r\n        password:\"\",\r\n      },\r\n      userDataFields: {\r\n        password: \"password\",\r\n        passwordhint: \"Edite password\",\r\n        firstNamesLabel: \"Nombres\",//\r\n        firstNameHint: \"Edite sus nombres\",\r\n        lastNamesLabel: \"Apellidos\",//\r\n        lastNameHint: \"Edite sus apellidos\",\r\n        idLabel: \"Documento de identidad\",\r\n        idHint: \"Edite su id\",\r\n        emailLabel: \"Email\",//\r\n        emailHint: \"Edite su email\",\r\n        phoneLabel: \"Teléfono\",\r\n        phoneHint: \"Edite su teléfono\",\r\n        birthDayLabel: \"Fecha de cumpleaños\",\r\n        birthDayHint: \"Edite su cumpleaños\",\r\n        emailRules: [\r\n          v => !!v || \"Correo es requerido\",\r\n          v => /.+@.+/.test(v) || \"Correo no válido\"\r\n        ],\r\n        rulesUpLoadAvatar: [\r\n          value => !value || value.size < 2000000 || \"Máximo 2 MB!\"\r\n        ],\r\n        addressLabel: \"Dirección\",\r\n        addressHint: \"Edite la dirección\",\r\n        rollLabel: \"Su rol es:\",\r\n        rollsHint: \"Cambiar de Rol\",\r\n\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    guardar1(){\r\n      if((this.$refs.formu.validate())){\r\n         if(this.form1.firs_name!=\"\"){\r\n            if(this.form1.last_name!=\"\"){\r\n               if(this.form1.ident!=\"\"){\r\n                  if(this.form1.user_email!=\"\"){\r\n                     if(this.form1.password!=\"\"){\r\n                        if(this.form1.userPhone!=\"\"){\r\n                           if(this.birthDay!=\"\"){\r\n                              if(this.form1.user_Address!=\"\"){\r\n                                 if(this.form1.tipo!=\"\"){\r\n                                    if(this.form1.tipo==\"Auxiliar\"){\r\n                                      this.form1.tipo2=2\r\n                                    /*axios.post(path2, this.form1).then((response)=> {\r\n                                    })\r\n                                    .catch((error) => {\r\n                                      console.log(error)\r\n                                    }),*/\r\n\r\n                                    }\r\n                                    if(this.form1.tipo==\"SuperAdmin\"){\r\n                                      this.form1.tipo2=3\r\n                                    }\r\n                                    if(this.form1.tipo==\"Cliente\"){\r\n                                      this.form1.tipo2=1\r\n                                    }\r\n                                    const path = 'https://limpi.app:8000/api/v1.0/users/'\r\n                                      /*const path2 = 'http://localhost:8000/api/v1.0/auxi/'*/\r\n                                      const formData = new FormData();\r\n                                      formData.append('firs_name',this.form1.firs_name)\r\n                                      formData.append('last_name',this.form1.last_name)\r\n                                      formData.append('ident',this.form1.ident)\r\n                                      formData.append('user_email',this.form1.user_email)\r\n                                      formData.append('password',this.form1.password)\r\n                                      formData.append('userPhone',this.form1.userPhone)\r\n                                      formData.append('birthDay',this.birthDay)\r\n                                      if (this.form1.image==null) {\r\n\r\n                                      }\r\n                                      else{formData.append('image',this.form1.image)}\r\n                                      formData.append('user_Address',this.form1.user_Address)\r\n                                      formData.append('tipo',this.form1.tipo2)\r\n                                      let options = {\r\n                                        headers: {\r\n                                          'content-type': 'multipart/form-data'\r\n                                        }\r\n                                      }\r\n\r\n                                    axios.post(path, formData, options).then((response)=> {\r\n                                       this.form1.id = response.data.id\r\n                                       this.popup({tipo:5,overlay:true})\r\n                                       this.if1=false\r\n                                       this.if2=true\r\n                                       this.if3=false\r\n                                      //this.UpdateComponent('find')\r\n                                      \r\n                                    })\r\n                                    .catch((error) => {\r\n                                      this.popup({tipo:4,overlay:true})\r\n                                      console.log(error)\r\n                                    })\r\n\r\n                                 }else{\r\n                                    this.popup({tipo:20,overlay:true})\r\n                                 }\r\n                              }else{\r\n                                 this.popup({tipo:19,overlay:true})\r\n                              }\r\n                              //this.popup({tipo:19,overlay:true})\r\n                           }else{\r\n                              this.popup({tipo:18,overlay:true})\r\n                           }\r\n                        }else{\r\n                           this.popup({tipo:17,overlay:true})\r\n                        }\r\n                     }else{\r\n                        this.popup({tipo:16,overlay:true})\r\n                     }\r\n                  }else{\r\n                     this.popup({tipo:15,overlay:true})\r\n                  }\r\n               }else{\r\n                  this.popup({tipo:14,overlay:true})\r\n               }\r\n            }else{\r\n               this.popup({tipo:13,overlay:true})\r\n            }  \r\n         }else{\r\n            this.popup({tipo:12,overlay:true})\r\n         }\r\n         //console.log((this.$refs.formu.validate()))\r\n      }else{\r\n         this.popup({tipo:9,overlay:true})\r\n      }\r\n         \r\n\r\n    },\r\n    paso(){\r\n      this.change(\r\n        {\r\n          showpanel: \"compfinduser\",\r\n        })\r\n    },\r\n    actualizar(){\r\n      if((this.$refs.formu.validate())){\r\n         const path2 = 'https://limpi.app:8000/api/v1.0/users/'+this.form1.id+'/'\r\n         if(this.form1.tipo==\"Auxiliar\"){\r\n           this.form1.tipo2=2\r\n         /*axios.post(path2, this.form1).then((response)=> {\r\n         })\r\n         .catch((error) => {\r\n           console.log(error)\r\n         }),*/\r\n\r\n         }\r\n         if(this.form1.tipo==\"SuperAdmin\"){\r\n           this.form1.tipo2=3\r\n         }\r\n         if(this.form1.tipo==\"Cliente\"){\r\n           this.form1.tipo2=1\r\n         }\r\n         const path = 'https://limpi.app:8000/api/v1.0/users/'\r\n           /*const path2 = 'http://localhost:8000/api/v1.0/auxi/'*/\r\n           const formData = new FormData();\r\n           formData.append('firs_name',this.form1.firs_name)\r\n           formData.append('last_name',this.form1.last_name)\r\n           formData.append('user_email',this.form1.user_email)\r\n           formData.append('password',this.form1.password)\r\n           formData.append('tipo',this.form1.tipo2)\r\n           if (this.form1.image==null) {\r\n\r\n           }\r\n           else{formData.append('image',this.form1.image)}\r\n           formData.append('ident',this.form1.ident)\r\n           formData.append('userPhone',this.form1.userPhone)\r\n           formData.append('birthDay',this.birthDay)\r\n           formData.append('user_Address',this.form1.user_Address)\r\n           let options = {\r\n             headers: {\r\n               'content-type': 'multipart/form-data'\r\n             }\r\n           }\r\n\r\n         axios.patch(path2, formData, options).then((response)=> {\r\n            this.popup({tipo:3,overlay:true})\r\n            })\r\n         .catch((error) => {\r\n           console.log(error)\r\n         })\r\n      }else{\r\n         this.popup({tipo:9,overlay:true})\r\n      }\r\n    },\r\n    guardar2(skills,mod){\r\n      const path2 = 'https://limpi.app:8000/api/v1.0/users/'+this.form1.id+'/'\r\n      if(this.form1.tipo==\"Auxiliar\"){\r\n        this.form1.tipo2=2\r\n      /*axios.post(path2, this.form1).then((response)=> {\r\n      })\r\n      .catch((error) => {\r\n        console.log(error)\r\n      }),*/\r\n\r\n      }\r\n      if(this.form1.tipo==\"SuperAdmin\"){\r\n        this.form1.tipo2=3\r\n      }\r\n      if(this.form1.tipo==\"Cliente\"){\r\n        this.form1.tipo2=1\r\n      }\r\n      const path = 'https://limpi.app:8000/api/v1.0/users/'\r\n        /*const path2 = 'http://localhost:8000/api/v1.0/auxi/'*/\r\n        const formData = new FormData();\r\n        formData.append('firs_name',this.form1.firs_name)\r\n        formData.append('last_name',this.form1.last_name)\r\n        formData.append('user_email',this.form1.user_email)\r\n        formData.append('password',this.form1.password)\r\n        formData.append('tipo',this.form1.tipo2)\r\n        if (this.form1.image==null) {\r\n\r\n        }\r\n        else{formData.append('image',this.form1.image)}\r\n        formData.append('ident',this.form1.ident)\r\n        formData.append('userPhone',this.form1.userPhone)\r\n        formData.append('birthDay',this.birthDay)\r\n        formData.append('user_Address',this.form1.user_Address)\r\n        let options = {\r\n          headers: {\r\n            'content-type': 'multipart/form-data'\r\n          }\r\n        }\r\n\r\n      axios.patch(path2, formData, options).then((response)=> {\r\n\r\n\r\n      \tskills.forEach(guardar)\r\n      mod.forEach(guardar_mod)\r\n      function guardar(elemento,indice){\r\n        const formData = new FormData();\r\n        var id_user = response.data.id\r\n        formData.append('id_user',id_user)\r\n        formData.append('skill',elemento)\r\n        var path = 'https://limpi.app:8000/api/v1.0/skills/'\r\n        let options = {\r\n          headers: {\r\n            'content-type': 'multipart/form-data'\r\n          }\r\n        }\r\n        axios.post(path, formData, options).then((response)=> {\r\n        })\r\n        .catch((error) => {\r\n          console.log(error)\r\n        })\r\n      }\r\n      function guardar_mod(elemento,indice){\r\n        const formData = new FormData();\r\n        var id_user = response.data.id\r\n        formData.append('id_user',id_user)\r\n        formData.append('modalidad',elemento)\r\n        var path = 'https://limpi.app:8000/api/v1.0/tipo_mod/'\r\n        let options = {\r\n          headers: {\r\n            'content-type': 'multipart/form-data'\r\n          }\r\n        }\r\n        axios.post(path, formData, options).then((response)=> {\r\n        })\r\n        .catch((error) => {\r\n          console.log(error)\r\n        })\r\n      }\r\n\r\n\r\n\r\n\r\n\r\n      \t/*this.form1.id = response.data.id\r\n      \tconsole.log(this.form1.id)*/\r\n        //this.UpdateComponent('find')\r\n        /*this.change(\r\n        {\r\n          showpanel: \"compfinduser\",\r\n        })]*/\r\n        this.popup({tipo:3,overlay:true})\r\n      })\r\n      .catch((error) => {\r\n        console.log(error)\r\n      })\r\n\r\n    },\r\n\r\n\r\n\r\n\r\n\r\n\r\n    cancel(){\r\n      this.change(\r\n        {\r\n          showpanel: \"compfinduser\",\r\n        })\r\n    },\r\n    /*skills(skills,mod){\r\n      skills.forEach(guardar)\r\n      mod.forEach(guardar_mod)\r\n      function guardar(elemento,indice){\r\n        const formData = new FormData();\r\n        var id_user = this.response.data.id\r\n        formData.append('id_user',id_user)\r\n        formData.append('skill',elemento)\r\n        var path = 'http://3.15.13.45:8000/api/v1.0/skills/'\r\n        let options = {\r\n          headers: {\r\n            'content-type': 'multipart/form-data'\r\n          }\r\n        }\r\n        axios.post(path, formData, options).then((response)=> {\r\n        })\r\n        .catch((error) => {\r\n          console.log(error)\r\n        })\r\n      }\r\n      function guardar_mod(elemento,indice){\r\n        const formData = new FormData();\r\n        var id_user = this.form1.id\r\n        formData.append('id_user',id_user)\r\n        formData.append('modalidad',elemento)\r\n        var path = 'http://3.15.13.45:8000/api/v1.0/tipo_mod/'\r\n        let options = {\r\n          headers: {\r\n            'content-type': 'multipart/form-data'\r\n          }\r\n        }\r\n        axios.post(path, formData, options).then((response)=> {\r\n        })\r\n        .catch((error) => {\r\n          console.log(error)\r\n        })\r\n      }\r\n    },*/\r\n    ...mapMutations([\"change\",\"popup\"])\r\n  },\r\n  watch: { \r\n      birthDay(val) {\r\n      var fecha=val;\r\n      //console.log(fecha)\r\n          // Si la fecha es correcta, calculamos la edad\r\n          var values=fecha.split(\"-\");\r\n          var dia = values[2];\r\n          var mes = values[1];\r\n          var ano = values[0];\r\n          // cogemos los valores actuales\r\n          var fecha_hoy = new Date();\r\n          var ahora_ano = fecha_hoy.getYear();\r\n          var ahora_mes = fecha_hoy.getMonth()+1;\r\n          var ahora_dia = fecha_hoy.getDate();\r\n   \r\n          // realizamos el calculo\r\n          var edad = (ahora_ano + 1900) - ano;\r\n          if ( ahora_mes < mes )\r\n          {\r\n              edad--;\r\n          }\r\n          if ((mes == ahora_mes) && (ahora_dia < dia))\r\n          {\r\n              edad--;\r\n          }\r\n          if (edad > 1900)\r\n          {\r\n              edad -= 1900;\r\n          }\r\n   \r\n          // calculamos los meses\r\n          var meses=0;\r\n          if(ahora_mes>mes)\r\n              meses=ahora_mes-mes;\r\n          if(ahora_mes<mes)\r\n              meses=12-(mes-ahora_mes);\r\n          if(ahora_mes==mes && dia>ahora_dia)\r\n              meses=11;\r\n   \r\n          // calculamos los dias\r\n          var dias=0;\r\n          if(ahora_dia>dia)\r\n              dias=ahora_dia-dia;\r\n          if(ahora_dia<dia)\r\n          {\r\n              var ultimoDiaMes=new Date(ahora_ano, ahora_mes, 0);\r\n              dias=ultimoDiaMes.getDate()-(dia-ahora_dia);\r\n          }\r\n          //console.log(edad)\r\n          this.form1.birthDay2=edad\r\n          console.log(this.birthDay)\r\n\r\n    }\r\n  },\r\n    computed: {\r\n    ...mapState([\"userData\", \"staffData\",\"rollType\",\"specialServices\",\"modalServices\"])\r\n  }\r\n};\r\n",{"version":3,"sources":["CompUserRegister.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"CompUserRegister.vue","sourceRoot":"src/components/managementuser","sourcesContent":["<template>\r\n  <!-- CREATE USER -->\r\n  <div>\r\n  <overlayalert/>\r\n     <v-row class=\"justify-center\">\r\n            <v-card width=\"400\">\r\n               <v-card-title class=\"justify-center\">\r\n                  <v-icon left color=\"primary\">mdi-tooltip-account</v-icon>\r\n                  <div class=\"title primary--text\">\r\n                     Agregar un nuevo usuario\r\n                  </div>\r\n               </v-card-title>\r\n               <v-divider></v-divider>\r\n               <!-- AVATAR PICTURE -->\r\n               <v-form v-model=\"valid\" ref=\"formu\" :lazy-validation=\"true\">\r\n               <div class=\"text-center\">\r\n                  <v-avatar\r\n                     size=\"100\"\r\n                     class=\"mt-7 mb-7\"\r\n                     >\r\n                     <img  src=\"../../assets/default-avatar.jpg\" alt=\"avatar\">\r\n                  </v-avatar>\r\n                  <v-file-input\r\n                     :rules=\"userDataFields.rulesUpLoadAvatar\"\r\n                     color=\"secondary\"\r\n                     accept=\"image/png, image/jpeg, image/bmp\"\r\n                     placeholder=\"Subir Imagen\"\r\n                     prepend-icon=\"mdi-camera\"\r\n                     label=\"Avatar\"\r\n                     class=\"avatar-custom\"\r\n                     v-model=\"form1.image\" \r\n                     ></v-file-input>\r\n               </div>\r\n               <!-- AVATAR PICTURE END-->\r\n               <v-card-text>\r\n                  <!-- ===== EXPANSION PANEL USER ===== -->\r\n                  <v-expansion-panels  accordion>\r\n                     <!-- FIRST NAME -->\r\n                     <v-expansion-panel>\r\n                        <v-expansion-panel-header >\r\n                           <div class=\"panel-title\">\r\n                              <span  class=\"primary--text font-weight-medium \">Nombres:</span><span :rules=\"[rules.texto, rules.required]\"> {{form1.firs_name}}</span>\r\n                           </div>\r\n                           <template v-slot:actions>\r\n                              <v-icon color=\"secondary\">mdi-square-edit-outline</v-icon>\r\n                           </template>\r\n                        </v-expansion-panel-header>\r\n                        <v-expansion-panel-content>\r\n                           <v-text-field\r\n                              :rules=\"[rules.texto, rules.required]\" \r\n                              v-model=\" form1.firs_name\" \r\n                              :label=\"userDataFields.firstNamesLabel\"\r\n                              color=\"secondary\"\r\n                              :hint=\"userDataFields.firstNameHint\" \r\n                              :persistent-hint=\"persistentHint\"\r\n                              >  </v-text-field>\r\n                        </v-expansion-panel-content>\r\n                     </v-expansion-panel>\r\n                     <!-- FIRST NAME END -->\r\n                     <!-- LAST NAME -->\r\n                     <v-expansion-panel>\r\n                        <v-expansion-panel-header >\r\n                           <div class=\"panel-title\">\r\n                              <span  class=\"primary--text font-weight-medium\">Apellidos:</span><span> {{form1.last_name}}</span>\r\n                           </div>\r\n                           <template v-slot:actions>\r\n                              <v-icon color=\"secondary\">mdi-square-edit-outline</v-icon>\r\n                           </template>\r\n                        </v-expansion-panel-header>\r\n                        <v-expansion-panel-content>\r\n                           <v-text-field\r\n                              :rules=\"[rules.texto, rules.required]\"\r\n                              v-model=\"form1.last_name\" \r\n                              :label=\"userDataFields.lastNamesLabel\"\r\n                              color=\"secondary\"\r\n                              :hint=\"userDataFields.lastNameHint\" \r\n                              :persistent-hint=\"persistentHint\"\r\n                              >  </v-text-field>\r\n                        </v-expansion-panel-content>\r\n                     </v-expansion-panel>\r\n                     <!-- LAST NAME END -->\r\n                     <!-- DOCUMENT ID -->\r\n                     <v-expansion-panel>\r\n                        <v-expansion-panel-header >\r\n                           <div class=\"panel-title\">\r\n                              <span  class=\"primary--text font-weight-medium\">Id:</span><span> {{form1.ident}}</span>\r\n                           </div>\r\n                           <template v-slot:actions>\r\n                              <v-icon color=\"secondary\">mdi-square-edit-outline</v-icon>\r\n                           </template>\r\n                        </v-expansion-panel-header>\r\n                        <v-expansion-panel-content>\r\n                           <v-text-field\r\n                              :rules=\"[rules.numeros]\" \r\n                              v-model=\"form1.ident\" \r\n                              :label=\"userDataFields.idLabel\"\r\n                              color=\"secondary\"\r\n                              :hint=\"userDataFields.idHint\" \r\n                              :persistent-hint=\"persistentHint\"\r\n                              >  </v-text-field>\r\n                        </v-expansion-panel-content>\r\n                     </v-expansion-panel>\r\n                     <!-- DOCUMENT END -->\r\n                     <!-- EMAIL -->\r\n                     <v-expansion-panel>\r\n                        <v-expansion-panel-header >\r\n                           <div class=\"panel-title\">\r\n                              <span  class=\"primary--text font-weight-medium\">Correo:</span><span> {{form1.user_email}}</span>\r\n                           </div>\r\n                           <template v-slot:actions>\r\n                              <v-icon color=\"secondary\">mdi-square-edit-outline</v-icon>\r\n                           </template>\r\n                        </v-expansion-panel-header>\r\n                        <v-expansion-panel-content>\r\n                           <v-text-field\r\n                              v-model=\"form1.user_email\" \r\n                              :label=\"userDataFields.emailLabel\"\r\n                              color=\"secondary\"\r\n                              :hint=\"userDataFields.emailHint\" \r\n                              :persistent-hint=\"persistentHint\"\r\n                              :rules=\"userDataFields.emailRules\"\r\n                              >  </v-text-field>\r\n                        </v-expansion-panel-content>\r\n                     </v-expansion-panel>\r\n                     <!-- EMAIL END -->\r\n                     <v-expansion-panel>\r\n                        <v-expansion-panel-header >\r\n                           <div class=\"panel-title\">\r\n                              <span  class=\"primary--text font-weight-medium \">password:</span><span :rules=\"[rules.texto, rules.required]\"> {{form1.password}}</span>\r\n                           </div>\r\n                           <template v-slot:actions>\r\n                              <v-icon color=\"secondary\">mdi-square-edit-outline</v-icon>\r\n                           </template>\r\n                        </v-expansion-panel-header>\r\n                        <v-expansion-panel-content>\r\n                           <v-text-field\r\n                              :rules=\"[rules.required]\" \r\n                              v-model=\" form1.password\" \r\n                              :label=\"userDataFields.password\"\r\n                              color=\"secondary\"\r\n                              :hint=\"userDataFields.passwordhint\" \r\n                              :persistent-hint=\"persistentHint\"\r\n                              >  </v-text-field>\r\n                        </v-expansion-panel-content>\r\n                     </v-expansion-panel>\r\n                     <!-- PHONE -->\r\n                     <v-expansion-panel>\r\n                        <v-expansion-panel-header >\r\n                           <div class=\"panel-title\">\r\n                              <span  class=\"primary--text font-weight-medium\">Teléfono:</span><span> {{form1.userPhone}}</span>\r\n                           </div>\r\n                           <template v-slot:actions>\r\n                              <v-icon color=\"secondary\">mdi-square-edit-outline</v-icon>\r\n                           </template>\r\n                        </v-expansion-panel-header>\r\n                        <v-expansion-panel-content>\r\n                           <v-text-field\r\n                              :rules=\"[rules.numeros]\" \r\n                              v-model=\"form1.userPhone\" \r\n                              :label=\"userDataFields.phoneLabel\"\r\n                              color=\"secondary\"\r\n                              :hint=\"userDataFields.phoneHint\" \r\n                              :persistent-hint=\"persistentHint\"\r\n                              >  </v-text-field>\r\n                        </v-expansion-panel-content>\r\n                     </v-expansion-panel>\r\n                     <!-- PHONE END -->\r\n                     <!-- BIRTHDAY -->\r\n                     <v-expansion-panel>\r\n                        <v-expansion-panel-header>\r\n                           <div class=\"panel-title\">\r\n                              <span  class=\"primary--text font-weight-medium\">Edad:</span><span> {{form1.birthDay2}}</span>\r\n                           </div>\r\n                           <template v-slot:actions>\r\n                              <v-icon color=\"secondary\">mdi-square-edit-outline</v-icon>\r\n                           </template>\r\n                        </v-expansion-panel-header>\r\n                        <v-expansion-panel-content>\r\n                           <v-dialog\r\n                              ref=\"dialog\"\r\n                              v-model=\"modal\"\r\n                              :return-value.sync=\"birthDay\"\r\n                              persistent\r\n                              width=\"320px\"\r\n                              >\r\n                              <template v-slot:activator=\"{ on }\">\r\n                                 <v-text-field\r\n                                    :rules=\"[rules.required]\"\r\n                                    v-model=\"birthDay\"\r\n                                    prepend-icon=\"mdi-calendar-multiple\"\r\n                                    :label=\"userDataFields.birthDayLabel\"\r\n                                    color=\"secondary\"\r\n                                    :hint=\"userDataFields.birthDayHint\" \r\n                                    :persistent-hint=\"persistentHint\"\r\n                                    readonly\r\n                                    v-on=\"on\"\r\n                                    ></v-text-field>\r\n                              </template>\r\n                              <v-date-picker\r\n                                 v-model=\"birthDay\"\r\n                                 :locale=\"locale\" \r\n                                 scrollable>\r\n                                 <div class=\"flex-grow-1\"></div>\r\n                                 <v-btn text color=\"primary\" @click=\"modal = false\">Cancel</v-btn>\r\n                                 <v-btn text color=\"primary\" @click=\"$refs.dialog.save(birthDay)\">OK</v-btn>\r\n                              </v-date-picker>\r\n                           </v-dialog>\r\n                        </v-expansion-panel-content>\r\n                     </v-expansion-panel>\r\n                     <!-- BIRTHDAY END -->\r\n                     <!-- ADDRESS -->\r\n                     <v-expansion-panel>\r\n                        <v-expansion-panel-header >\r\n                           <div class=\"panel-title\">\r\n                              <span  class=\"primary--text font-weight-medium\">Dirección:</span><span> {{form1.user_Address}}</span>\r\n                           </div>\r\n                           <template v-slot:actions>\r\n                              <v-icon color=\"secondary\">mdi-square-edit-outline</v-icon>\r\n                           </template>\r\n                        </v-expansion-panel-header>\r\n                        <v-expansion-panel-content>\r\n                           <v-text-field\r\n                              :rules=\"[rules.required]\"\r\n                              v-model=\"form1.user_Address\" \r\n                              :label=\"userDataFields.addressLabel\"\r\n                              color=\"secondary\"\r\n                              :hint=\"userDataFields.addressHint\" \r\n                              :persistent-hint=\"persistentHint\"\r\n                              >  </v-text-field>\r\n                        </v-expansion-panel-content>\r\n                     </v-expansion-panel>\r\n                     <!-- ADDRESS END -->\r\n                     <!-- ROLL -->\r\n                     <v-expansion-panel>\r\n                        <v-expansion-panel-header >\r\n                           <div class=\"panel-title\">\r\n                              <span  class=\"primary--text font-weight-medium\">Roll Actual:</span><span> {{form1.tipo}}</span>\r\n                           </div>\r\n                           <template v-slot:actions>\r\n                              <v-icon color=\"secondary\">mdi-square-edit-outline</v-icon>\r\n                           </template>\r\n                        </v-expansion-panel-header>\r\n                        <v-expansion-panel-content>\r\n                           <v-overflow-btn\r\n                              :rules=\"[rules.required]\"\r\n                              v-model=\"form1.tipo\" \r\n                              class=\"my-2\"\r\n                              :items=\"rollType\"\r\n                              color=\"secondary\"\r\n                              label=\"Nuevo Roll\"\r\n                              editable\r\n                              item-value=\"text\"\r\n                              :hint=\"userDataFields.rollHint\" \r\n                              :persistent-hint=\"persistentHint\"\r\n                              ></v-overflow-btn>\r\n                        </v-expansion-panel-content>\r\n                     </v-expansion-panel>\r\n                     <!-- ROLL END -->\r\n                  </v-expansion-panels>\r\n                  <!-- ===== EXPANSION PANEL USER END ===== -->\r\n               </v-card-text>\r\n               <!-- continue btn -->\r\n               <v-card-actions>\r\n                  <v-btn color=\"primary mb-2\" v-if=\"if1\" @click=\"guardar1()\">Crear Usuario</v-btn>\r\n                  <v-btn color=\"primary mb-2\" v-if=\"if2\" @click=\"actualizar()\">Actualizar Usuario</v-btn>\r\n                  <v-btn color=\"error mb-2\" @click=\"cancel\">Atras</v-btn>\r\n               </v-card-actions>\r\n               <!-- continue btn END -->\r\n             </v-form>\r\n         </v-card>\r\n         <!-- continue btn END -->\r\n         <v-col xs=\"12\" sm=\"12\" md=\"4\" lg=\"4\" xl=\"4\" v-if=\"form1.tipo=='Auxiliar'\">\r\n         \t<v-card>\r\n         <v-card-title class=\"justify-center\">\r\n            <v-icon left color=\"primary\">mdi-hail</v-icon>\r\n            <div class=\"title primary--text\">\r\n               Competencias del {{staffData[listNumber].userRoll}}\r\n            </div>\r\n         </v-card-title>\r\n         <v-divider></v-divider>\r\n         <!-- ===== EXPANSION PANEL USER ===== -->\r\n         <v-expansion-panels accordion>\r\n            <!-- SPECIALS SERVICES -->\r\n            <v-expansion-panel>\r\n               <v-expansion-panel-header >\r\n                  <div class=\"panel-title\">\r\n                      <v-icon left color=\"primary\">mdi-broom</v-icon>\r\n                     <span  class=\"primary--text font-weight-medium \">Servicios especiales</span>\r\n                  </div>\r\n                  <template v-slot:actions>\r\n                     <v-icon color=\"secondary\">mdi-square-edit-outline</v-icon>\r\n                  </template>\r\n               </v-expansion-panel-header>\r\n               <v-expansion-panel-content>\r\n                  <v-checkbox v-for=\"specialservice of specialServices\" :key=\"specialservice.taskid\"  v-model=\"userInternalSkills\" :label=\"specialservice.skill\" :value=\"specialservice.skill\" :disabled=\"specialservice.edit\"></v-checkbox>\r\n               </v-expansion-panel-content>\r\n               \r\n            </v-expansion-panel>\r\n            <!-- SPECIALS SERVICES END -->\r\n              <!-- SPECIALS SERVICES -->\r\n            <v-expansion-panel>\r\n               <v-expansion-panel-header >\r\n                  <div class=\"panel-title\">\r\n                      <v-icon left color=\"primary\">mdi-account-check</v-icon>\r\n                     <span  class=\"primary--text font-weight-medium \">Aplicar modalidad</span>\r\n                  </div>\r\n                  <template v-slot:actions>\r\n                     <v-icon color=\"secondary\">mdi-square-edit-outline</v-icon>\r\n                  </template>\r\n               </v-expansion-panel-header>\r\n               <v-expansion-panel-content>\r\n                  <v-checkbox v-for=\"modservice of modalServices\" :key=\"modservice.taskid\"  v-model=\"modCheckService\" :label=\"modservice.servicename\"\r\n                  :value=\"modservice.servicename\" :disabled=\"modservice.edit\"\r\n                  ></v-checkbox>\r\n               </v-expansion-panel-content>\r\n               \r\n            </v-expansion-panel>\r\n            <!-- SPECIALS SERVICES END -->\r\n            \r\n            \r\n          \r\n\r\n         </v-expansion-panels>\r\n         <!-- ===== EXPANSION PANEL USER END ===== -->\r\n                <!-- continue btn -->\r\n         <v-card-actions>\r\n            <v-btn color=\"primary mb-2\" :disabled=\"if3\" v-on:click=\"guardar2(userInternalSkills,modCheckService)\">Guardar skills</v-btn>\r\n         </v-card-actions>\r\n         <!-- continue btn END -->\r\n         </v-card>\r\n     </v-col>\r\n         \r\n            <!-- CREATE USER END -->\r\n               </v-row>\r\n               </div>\r\n  \r\n</template>\r\n<script>\r\nimport { mapState,mapMutations } from \"vuex\";\r\nimport overlayalert from '@/components/popups/CompPopsAlert.vue'\r\nimport axios from 'axios'\r\nexport default {\r\n   components: {\r\n    overlayalert,\r\n  },\r\n  data() {\r\n    return {\r\n      valid: false,\r\n      rules: {\r\n           ///(?=.*[AZfont>)/.test(v)\r\n           texto: v => /^[A-Z ]+$/i.test(v) || 'Use solo letras',\r\n           required: value => !!value || \"Requerido\",\r\n           min: v => v.length >= 6 || \"Min 6 caractéres\",\r\n           emailMatch: () => \"The email and password you entered don't match\",\r\n           numeros: v => /^\\d+$/.test(v) || 'Use solo numeros',\r\n         },\r\n      if1:true,\r\n      if2:false,\r\n      if3:true,\r\n      guardar: \"guardar1()\",\r\n      listNumber: 1,\r\n      boton:false,\r\n      id: null,\r\n      menu: false,\r\n      modal: false,\r\n      menu2: false,\r\n      locale: \"es\",\r\n      birthDay:\"\",\r\n      popout: false,\r\n      inset: false,\r\n      multiple: false,\r\n      disabled: false,\r\n      readonly: false,\r\n      focusable: false,\r\n      persistentHint: true,\r\n      userInternalSkills: [],\r\n      modCheckService:[],\r\n      form1:{\r\n        firs_name:\"\",\r\n        last_name:\"\",\r\n        user_email:\"\",\r\n        tipo:\"\",\r\n        tipo2:\"\",\r\n        image: null,\r\n        ident:\"\",\r\n        userPhone:\"\",\r\n        birthDay:\"\",\r\n        user_Address:\"\",\r\n        id:0,\r\n        password:\"\",\r\n      },\r\n      userDataFields: {\r\n        password: \"password\",\r\n        passwordhint: \"Edite password\",\r\n        firstNamesLabel: \"Nombres\",//\r\n        firstNameHint: \"Edite sus nombres\",\r\n        lastNamesLabel: \"Apellidos\",//\r\n        lastNameHint: \"Edite sus apellidos\",\r\n        idLabel: \"Documento de identidad\",\r\n        idHint: \"Edite su id\",\r\n        emailLabel: \"Email\",//\r\n        emailHint: \"Edite su email\",\r\n        phoneLabel: \"Teléfono\",\r\n        phoneHint: \"Edite su teléfono\",\r\n        birthDayLabel: \"Fecha de cumpleaños\",\r\n        birthDayHint: \"Edite su cumpleaños\",\r\n        emailRules: [\r\n          v => !!v || \"Correo es requerido\",\r\n          v => /.+@.+/.test(v) || \"Correo no válido\"\r\n        ],\r\n        rulesUpLoadAvatar: [\r\n          value => !value || value.size < 2000000 || \"Máximo 2 MB!\"\r\n        ],\r\n        addressLabel: \"Dirección\",\r\n        addressHint: \"Edite la dirección\",\r\n        rollLabel: \"Su rol es:\",\r\n        rollsHint: \"Cambiar de Rol\",\r\n\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    guardar1(){\r\n      if((this.$refs.formu.validate())){\r\n         if(this.form1.firs_name!=\"\"){\r\n            if(this.form1.last_name!=\"\"){\r\n               if(this.form1.ident!=\"\"){\r\n                  if(this.form1.user_email!=\"\"){\r\n                     if(this.form1.password!=\"\"){\r\n                        if(this.form1.userPhone!=\"\"){\r\n                           if(this.birthDay!=\"\"){\r\n                              if(this.form1.user_Address!=\"\"){\r\n                                 if(this.form1.tipo!=\"\"){\r\n                                    if(this.form1.tipo==\"Auxiliar\"){\r\n                                      this.form1.tipo2=2\r\n                                    /*axios.post(path2, this.form1).then((response)=> {\r\n                                    })\r\n                                    .catch((error) => {\r\n                                      console.log(error)\r\n                                    }),*/\r\n\r\n                                    }\r\n                                    if(this.form1.tipo==\"SuperAdmin\"){\r\n                                      this.form1.tipo2=3\r\n                                    }\r\n                                    if(this.form1.tipo==\"Cliente\"){\r\n                                      this.form1.tipo2=1\r\n                                    }\r\n                                    const path = 'https://limpi.app:8000/api/v1.0/users/'\r\n                                      /*const path2 = 'http://localhost:8000/api/v1.0/auxi/'*/\r\n                                      const formData = new FormData();\r\n                                      formData.append('firs_name',this.form1.firs_name)\r\n                                      formData.append('last_name',this.form1.last_name)\r\n                                      formData.append('ident',this.form1.ident)\r\n                                      formData.append('user_email',this.form1.user_email)\r\n                                      formData.append('password',this.form1.password)\r\n                                      formData.append('userPhone',this.form1.userPhone)\r\n                                      formData.append('birthDay',this.birthDay)\r\n                                      if (this.form1.image==null) {\r\n\r\n                                      }\r\n                                      else{formData.append('image',this.form1.image)}\r\n                                      formData.append('user_Address',this.form1.user_Address)\r\n                                      formData.append('tipo',this.form1.tipo2)\r\n                                      let options = {\r\n                                        headers: {\r\n                                          'content-type': 'multipart/form-data'\r\n                                        }\r\n                                      }\r\n\r\n                                    axios.post(path, formData, options).then((response)=> {\r\n                                       this.form1.id = response.data.id\r\n                                       this.popup({tipo:5,overlay:true})\r\n                                       this.if1=false\r\n                                       this.if2=true\r\n                                       this.if3=false\r\n                                      //this.UpdateComponent('find')\r\n                                      \r\n                                    })\r\n                                    .catch((error) => {\r\n                                      this.popup({tipo:4,overlay:true})\r\n                                      console.log(error)\r\n                                    })\r\n\r\n                                 }else{\r\n                                    this.popup({tipo:20,overlay:true})\r\n                                 }\r\n                              }else{\r\n                                 this.popup({tipo:19,overlay:true})\r\n                              }\r\n                              //this.popup({tipo:19,overlay:true})\r\n                           }else{\r\n                              this.popup({tipo:18,overlay:true})\r\n                           }\r\n                        }else{\r\n                           this.popup({tipo:17,overlay:true})\r\n                        }\r\n                     }else{\r\n                        this.popup({tipo:16,overlay:true})\r\n                     }\r\n                  }else{\r\n                     this.popup({tipo:15,overlay:true})\r\n                  }\r\n               }else{\r\n                  this.popup({tipo:14,overlay:true})\r\n               }\r\n            }else{\r\n               this.popup({tipo:13,overlay:true})\r\n            }  \r\n         }else{\r\n            this.popup({tipo:12,overlay:true})\r\n         }\r\n         //console.log((this.$refs.formu.validate()))\r\n      }else{\r\n         this.popup({tipo:9,overlay:true})\r\n      }\r\n         \r\n\r\n    },\r\n    paso(){\r\n      this.change(\r\n        {\r\n          showpanel: \"compfinduser\",\r\n        })\r\n    },\r\n    actualizar(){\r\n      if((this.$refs.formu.validate())){\r\n         const path2 = 'https://limpi.app:8000/api/v1.0/users/'+this.form1.id+'/'\r\n         if(this.form1.tipo==\"Auxiliar\"){\r\n           this.form1.tipo2=2\r\n         /*axios.post(path2, this.form1).then((response)=> {\r\n         })\r\n         .catch((error) => {\r\n           console.log(error)\r\n         }),*/\r\n\r\n         }\r\n         if(this.form1.tipo==\"SuperAdmin\"){\r\n           this.form1.tipo2=3\r\n         }\r\n         if(this.form1.tipo==\"Cliente\"){\r\n           this.form1.tipo2=1\r\n         }\r\n         const path = 'https://limpi.app:8000/api/v1.0/users/'\r\n           /*const path2 = 'http://localhost:8000/api/v1.0/auxi/'*/\r\n           const formData = new FormData();\r\n           formData.append('firs_name',this.form1.firs_name)\r\n           formData.append('last_name',this.form1.last_name)\r\n           formData.append('user_email',this.form1.user_email)\r\n           formData.append('password',this.form1.password)\r\n           formData.append('tipo',this.form1.tipo2)\r\n           if (this.form1.image==null) {\r\n\r\n           }\r\n           else{formData.append('image',this.form1.image)}\r\n           formData.append('ident',this.form1.ident)\r\n           formData.append('userPhone',this.form1.userPhone)\r\n           formData.append('birthDay',this.birthDay)\r\n           formData.append('user_Address',this.form1.user_Address)\r\n           let options = {\r\n             headers: {\r\n               'content-type': 'multipart/form-data'\r\n             }\r\n           }\r\n\r\n         axios.patch(path2, formData, options).then((response)=> {\r\n            this.popup({tipo:3,overlay:true})\r\n            })\r\n         .catch((error) => {\r\n           console.log(error)\r\n         })\r\n      }else{\r\n         this.popup({tipo:9,overlay:true})\r\n      }\r\n    },\r\n    guardar2(skills,mod){\r\n      const path2 = 'https://limpi.app:8000/api/v1.0/users/'+this.form1.id+'/'\r\n      if(this.form1.tipo==\"Auxiliar\"){\r\n        this.form1.tipo2=2\r\n      /*axios.post(path2, this.form1).then((response)=> {\r\n      })\r\n      .catch((error) => {\r\n        console.log(error)\r\n      }),*/\r\n\r\n      }\r\n      if(this.form1.tipo==\"SuperAdmin\"){\r\n        this.form1.tipo2=3\r\n      }\r\n      if(this.form1.tipo==\"Cliente\"){\r\n        this.form1.tipo2=1\r\n      }\r\n      const path = 'https://limpi.app:8000/api/v1.0/users/'\r\n        /*const path2 = 'http://localhost:8000/api/v1.0/auxi/'*/\r\n        const formData = new FormData();\r\n        formData.append('firs_name',this.form1.firs_name)\r\n        formData.append('last_name',this.form1.last_name)\r\n        formData.append('user_email',this.form1.user_email)\r\n        formData.append('password',this.form1.password)\r\n        formData.append('tipo',this.form1.tipo2)\r\n        if (this.form1.image==null) {\r\n\r\n        }\r\n        else{formData.append('image',this.form1.image)}\r\n        formData.append('ident',this.form1.ident)\r\n        formData.append('userPhone',this.form1.userPhone)\r\n        formData.append('birthDay',this.birthDay)\r\n        formData.append('user_Address',this.form1.user_Address)\r\n        let options = {\r\n          headers: {\r\n            'content-type': 'multipart/form-data'\r\n          }\r\n        }\r\n\r\n      axios.patch(path2, formData, options).then((response)=> {\r\n\r\n\r\n      \tskills.forEach(guardar)\r\n      mod.forEach(guardar_mod)\r\n      function guardar(elemento,indice){\r\n        const formData = new FormData();\r\n        var id_user = response.data.id\r\n        formData.append('id_user',id_user)\r\n        formData.append('skill',elemento)\r\n        var path = 'https://limpi.app:8000/api/v1.0/skills/'\r\n        let options = {\r\n          headers: {\r\n            'content-type': 'multipart/form-data'\r\n          }\r\n        }\r\n        axios.post(path, formData, options).then((response)=> {\r\n        })\r\n        .catch((error) => {\r\n          console.log(error)\r\n        })\r\n      }\r\n      function guardar_mod(elemento,indice){\r\n        const formData = new FormData();\r\n        var id_user = response.data.id\r\n        formData.append('id_user',id_user)\r\n        formData.append('modalidad',elemento)\r\n        var path = 'https://limpi.app:8000/api/v1.0/tipo_mod/'\r\n        let options = {\r\n          headers: {\r\n            'content-type': 'multipart/form-data'\r\n          }\r\n        }\r\n        axios.post(path, formData, options).then((response)=> {\r\n        })\r\n        .catch((error) => {\r\n          console.log(error)\r\n        })\r\n      }\r\n\r\n\r\n\r\n\r\n\r\n      \t/*this.form1.id = response.data.id\r\n      \tconsole.log(this.form1.id)*/\r\n        //this.UpdateComponent('find')\r\n        /*this.change(\r\n        {\r\n          showpanel: \"compfinduser\",\r\n        })]*/\r\n        this.popup({tipo:3,overlay:true})\r\n      })\r\n      .catch((error) => {\r\n        console.log(error)\r\n      })\r\n\r\n    },\r\n\r\n\r\n\r\n\r\n\r\n\r\n    cancel(){\r\n      this.change(\r\n        {\r\n          showpanel: \"compfinduser\",\r\n        })\r\n    },\r\n    /*skills(skills,mod){\r\n      skills.forEach(guardar)\r\n      mod.forEach(guardar_mod)\r\n      function guardar(elemento,indice){\r\n        const formData = new FormData();\r\n        var id_user = this.response.data.id\r\n        formData.append('id_user',id_user)\r\n        formData.append('skill',elemento)\r\n        var path = 'http://3.15.13.45:8000/api/v1.0/skills/'\r\n        let options = {\r\n          headers: {\r\n            'content-type': 'multipart/form-data'\r\n          }\r\n        }\r\n        axios.post(path, formData, options).then((response)=> {\r\n        })\r\n        .catch((error) => {\r\n          console.log(error)\r\n        })\r\n      }\r\n      function guardar_mod(elemento,indice){\r\n        const formData = new FormData();\r\n        var id_user = this.form1.id\r\n        formData.append('id_user',id_user)\r\n        formData.append('modalidad',elemento)\r\n        var path = 'http://3.15.13.45:8000/api/v1.0/tipo_mod/'\r\n        let options = {\r\n          headers: {\r\n            'content-type': 'multipart/form-data'\r\n          }\r\n        }\r\n        axios.post(path, formData, options).then((response)=> {\r\n        })\r\n        .catch((error) => {\r\n          console.log(error)\r\n        })\r\n      }\r\n    },*/\r\n    ...mapMutations([\"change\",\"popup\"])\r\n  },\r\n  watch: { \r\n      birthDay(val) {\r\n      var fecha=val;\r\n      //console.log(fecha)\r\n          // Si la fecha es correcta, calculamos la edad\r\n          var values=fecha.split(\"-\");\r\n          var dia = values[2];\r\n          var mes = values[1];\r\n          var ano = values[0];\r\n          // cogemos los valores actuales\r\n          var fecha_hoy = new Date();\r\n          var ahora_ano = fecha_hoy.getYear();\r\n          var ahora_mes = fecha_hoy.getMonth()+1;\r\n          var ahora_dia = fecha_hoy.getDate();\r\n   \r\n          // realizamos el calculo\r\n          var edad = (ahora_ano + 1900) - ano;\r\n          if ( ahora_mes < mes )\r\n          {\r\n              edad--;\r\n          }\r\n          if ((mes == ahora_mes) && (ahora_dia < dia))\r\n          {\r\n              edad--;\r\n          }\r\n          if (edad > 1900)\r\n          {\r\n              edad -= 1900;\r\n          }\r\n   \r\n          // calculamos los meses\r\n          var meses=0;\r\n          if(ahora_mes>mes)\r\n              meses=ahora_mes-mes;\r\n          if(ahora_mes<mes)\r\n              meses=12-(mes-ahora_mes);\r\n          if(ahora_mes==mes && dia>ahora_dia)\r\n              meses=11;\r\n   \r\n          // calculamos los dias\r\n          var dias=0;\r\n          if(ahora_dia>dia)\r\n              dias=ahora_dia-dia;\r\n          if(ahora_dia<dia)\r\n          {\r\n              var ultimoDiaMes=new Date(ahora_ano, ahora_mes, 0);\r\n              dias=ultimoDiaMes.getDate()-(dia-ahora_dia);\r\n          }\r\n          //console.log(edad)\r\n          this.form1.birthDay2=edad\r\n          console.log(this.birthDay)\r\n\r\n    }\r\n  },\r\n    computed: {\r\n    ...mapState([\"userData\", \"staffData\",\"rollType\",\"specialServices\",\"modalServices\"])\r\n  }\r\n};\r\n</script>"]}]}